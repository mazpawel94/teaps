(function(){"use strict";var t={434:function(t,e,s){t.exports=s.p+"img/piggy-bank-1001599_640.67e58110.png"},542:function(t,e,s){t.exports=s.p+"img/1_zl_mini_1_01.18014e46.png"},634:function(t,e,s){t.exports=s.p+"img/2zl_mini_1_01.c0346378.png"},1070:function(t,e,s){t.exports=s.p+"img/5_groszy_jpg.a8b00bae.png"},1347:function(t,e,s){t.exports=s.p+"img/1_grosz.05ace505.png"},5878:function(t,e,s){t.exports=s.p+"img/2_grosze_2017.c0e28e1a.png"},6108:function(t,e,s){t.exports=s.p+"img/20_gr_mini_1_01.047b2fc8.png"},7485:function(t,e,s){t.exports=s.p+"img/5zl_mini_1_01.1b1fd783.png"},7771:function(t,e,s){t.exports=s.p+"img/50_gr_mini_1_01.db7912b3.png"},7943:function(t,e,s){t.exports=s.p+"img/10_gr_mini_1_01.16c04dd0.png"},9043:function(t,e,s){var n=s(5471),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("money",{model:{value:t.coins,callback:function(e){t.coins=e},expression:"coins"}}),t._v(" "),s("employees",{attrs:{coins:t.coins},model:{value:t.todayWorkers,callback:function(e){t.todayWorkers=e},expression:"todayWorkers"}}),t._v(" "),s("logbook"),t._v(" "),s("payments"),t._v(" "),s("tips-form",{attrs:{coins:t.coins,todayWorkers:t.todayWorkers}})],1)},o=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"money"},[n("div",{staticClass:"summary"},[t._m(0),t._v(" "),n("div",{staticClass:"inputs"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.coins[0].amount,expression:"coins[0].amount"}],attrs:{type:"number",min:"0",name:"one-penny"},domProps:{value:t.coins[0].amount},on:{input:[function(e){e.target.composing||t.$set(t.coins[0],"amount",e.target.value)},t.emitSum]}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.coins[1].amount,expression:"coins[1].amount"}],attrs:{type:"number",min:"0",name:"two-penny"},domProps:{value:t.coins[1].amount},on:{input:[function(e){e.target.composing||t.$set(t.coins[1],"amount",e.target.value)},t.emitSum]}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.coins[2].amount,expression:"coins[2].amount"}],attrs:{type:"number",min:"0",name:"five-penny"},domProps:{value:t.coins[2].amount},on:{input:[function(e){e.target.composing||t.$set(t.coins[2],"amount",e.target.value)},t.emitSum]}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.coins[3].amount,expression:"coins[3].amount"}],attrs:{type:"number",min:"0",name:"ten-penny"},domProps:{value:t.coins[3].amount},on:{input:[function(e){e.target.composing||t.$set(t.coins[3],"amount",e.target.value)},t.emitSum]}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.coins[4].amount,expression:"coins[4].amount"}],attrs:{type:"number",min:"0",name:"twenty-penny"},domProps:{value:t.coins[4].amount},on:{input:[function(e){e.target.composing||t.$set(t.coins[4],"amount",e.target.value)},t.emitSum]}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.coins[5].amount,expression:"coins[5].amount"}],attrs:{type:"number",min:"0",name:"fifty-penny"},domProps:{value:t.coins[5].amount},on:{input:[function(e){e.target.composing||t.$set(t.coins[5],"amount",e.target.value)},t.emitSum]}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.coins[6].amount,expression:"coins[6].amount"}],attrs:{type:"number",min:"0",name:"one-zloty"},domProps:{value:t.coins[6].amount},on:{input:[function(e){e.target.composing||t.$set(t.coins[6],"amount",e.target.value)},t.emitSum]}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.coins[7].amount,expression:"coins[7].amount"}],attrs:{type:"number",min:"0",name:"two-zlotys"},domProps:{value:t.coins[7].amount},on:{input:[function(e){e.target.composing||t.$set(t.coins[7],"amount",e.target.value)},t.emitSum]}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.coins[8].amount,expression:"coins[8].amount"}],attrs:{type:"number",min:"0",name:"five-zlotys"},domProps:{value:t.coins[8].amount},on:{input:[function(e){e.target.composing||t.$set(t.coins[8],"amount",e.target.value)},t.emitSum]}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.coins[9].amount,expression:"coins[9].amount"}],attrs:{type:"number",name:"ten-zlotys"},domProps:{value:t.coins[9].amount},on:{input:[function(e){e.target.composing||t.$set(t.coins[9],"amount",e.target.value)},t.emitSum]}})])]),t._v(" "),n("div",{staticClass:"pig"},[n("div",{staticClass:"amount"},[t._v(t._s(t.beautyAmount(t.sum())))]),t._v(" "),n("img",{attrs:{src:s(434),alt:""}}),t._v(" "),n("div",{staticClass:"start-amount"})])])},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"images"},[n("img",{attrs:{src:s(1347),alt:""}}),t._v(" "),n("img",{attrs:{src:s(5878),alt:""}}),t._v(" "),n("img",{attrs:{src:s(1070),alt:""}}),t._v(" "),n("img",{attrs:{src:s(7943),alt:""}}),t._v(" "),n("img",{attrs:{src:s(6108),alt:""}}),t._v(" "),n("img",{attrs:{src:s(7771),alt:""}}),t._v(" "),n("img",{attrs:{src:s(542),alt:""}}),t._v(" "),n("img",{attrs:{src:s(634),alt:""}}),t._v(" "),n("img",{attrs:{src:s(7485),alt:""}}),t._v(" "),n("img",{attrs:{src:s(9569),alt:""}})])}],c=(s(7075),s(5446)),u=s(2505),m=s.n(u);const l="api/moneys",p="api/pig",v="api/employees",d="api/summaries",y="api/payments";class h{static getMoneys(){return new Promise((async(t,e)=>{try{const e=await m().get(l),s=e.data;t(s.map((t=>(0,c.A)({},t))))}catch(s){e(s)}}))}static saveSum(t){return m().put(p,{sum:t})}static getSum(){return new Promise((async(t,e)=>{try{const e=await m().get(p),s=e.data;t(s)}catch(s){e(s)}}))}static saveCoins(t,e){return m().put(l,{coin:t,amount:e})}static getEmployees(){return new Promise((async(t,e)=>{try{const e=await m().get(v),s=e.data;t(s.map((t=>(0,c.A)({},t))))}catch(s){e(s)}}))}static addEmployee(t){return m().post(v,{name:t})}static addEmployeeMoney(t,e){return m().put(v,{name:t,money:e})}static getSummaries(){return new Promise((async(t,e)=>{try{const e=await m().get(d),s=e.data;t(s.map((t=>(0,c.A)({},t))))}catch(s){e(s)}}))}static addSummary(t,e,s){return m().post(d,{participants:e,sum:s,date:t})}static addPayment(t,e){return m().post(y,{name:t,date:e})}static getPayments(){return new Promise((async(t,e)=>{try{const e=await m().get(y),s=e.data;t(s.map((t=>(0,c.A)({},t))))}catch(s){e(s)}}))}}var _=h,f={data(){return{error:"",text:"",coins:[],startAmount:0}},async created(){try{const t=["1 grosz","2 grosze","5 groszy","10 groszy","20 groszy","50 groszy","1 złoty","2 złote","5 złotych","10 złotych"],e=await _.getMoneys();this.coins=e.sort(((e,s)=>t.indexOf(e.coin)>t.indexOf(s.coin)?1:-1)),this.startAmount=this.sum(),this.emitSum()}catch(t){this.error=t}},methods:{async newCalculation(){try{await _.saveSum(this.beautyAmount(this.sum()));for(let t=0;t<this.coins.length;t++)await _.saveCoins(this.coins[t].coin,this.coins[t].amount)}catch(t){this.error=t}},emitSum:function(){this.$emit("input",this.coins)},sum:function(){return 1*this.coins[0].amount+2*this.coins[1].amount+5*this.coins[2].amount+10*this.coins[3].amount+20*this.coins[4].amount+50*this.coins[5].amount+100*this.coins[6].amount+200*this.coins[7].amount+500*this.coins[8].amount+1e3*this.coins[9].amount},beautyAmount:function(t){return` ${Math.floor(t/100)},${t%100<10?"0"+t%100:t%100} zł`}},computed:{newTips:function(){return this.sum()-this.startAmount}}},g=f,w=s(845),k=(0,w.A)(g,i,r,!1,null,"068f524c",null),b=k.exports,E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"employees"},[t.savingTime?s("div",{staticClass:"loader"}):t._e(),t._v(" "),t._l(t.filteredWorkers,(function(e){return s("div",{key:e._id,staticClass:"employee"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.today,expression:"worker.today"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.today)?t._i(e.today,null)>-1:e.today},on:{click:function(s){t.emitTodayWorkers(e)},change:function(s){var n=e.today,a=s.target,o=!!a.checked;if(Array.isArray(n)){var i=null,r=t._i(n,i);a.checked?r<0&&t.$set(e,"today",n.concat([i])):r>-1&&t.$set(e,"today",n.slice(0,r).concat(n.slice(r+1)))}else t.$set(e,"today",o)}}}),t._v(" "),s("div",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),e.money>0?s("div",{staticClass:"sum",style:{width:30*e.money+"px"}},[t._v("\n      "+t._s(e.money.toFixed(2)+" zł")+"\n      "),s("div",{staticClass:"start-amount"}),t._v(" "),s("button",{staticClass:"take-money",class:{show:e.money>=10},on:{click:function(s){t.take10zlotys(e)}}},[t._v("\n        Weźże dychę\n      ")])]):t._e()])})),t._v(" "),s("div",{staticClass:"employee new"},[s("input",{attrs:{type:"checkbox",name:"",id:""}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newEmployee,expression:"newEmployee"}],staticClass:"new-employee",attrs:{type:"text",placeholder:"nowa osoba"},domProps:{value:t.newEmployee},on:{input:function(e){e.target.composing||(t.newEmployee=e.target.value)}}}),t._v(" "),s("button",{on:{click:t.addEmployee}},[t._v("+")])]),t._v(" "),s("div",{staticClass:"ex-employee-toggle"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.showExEmployees,expression:"showExEmployees"}],attrs:{type:"checkbox",id:"showExEmployees"},domProps:{checked:Array.isArray(t.showExEmployees)?t._i(t.showExEmployees,null)>-1:t.showExEmployees},on:{change:function(e){var s=t.showExEmployees,n=e.target,a=!!n.checked;if(Array.isArray(s)){var o=null,i=t._i(s,o);n.checked?i<0&&(t.showExEmployees=s.concat([o])):i>-1&&(t.showExEmployees=s.slice(0,i).concat(s.slice(i+1)))}else t.showExEmployees=a}}}),t._v(" "),s("label",{attrs:{for:"showExEmployees"}},[t._v("Pokaż byłych pracowników")])])],2)},x=[],C=(s(5890),{data(){return{error:"",text:"",workers:[],newEmployee:"",savingTime:!1,showExEmployees:!1}},props:["coins"],computed:{filteredWorkers(){return this.showExEmployees?this.workers:this.workers.filter((t=>!t.isExEmployee))}},async created(){try{this.workers=await _.getEmployees()}catch(t){this.error=t}},methods:{todayWorkers:function(){return this.workers.filter((t=>t.today))},checkName:function(t){let e=!0;return[...this.workers].forEach((s=>{s.name.toUpperCase()===t.toUpperCase()&&(e=!1)})),e},addEmployee:function(){const t=this.newEmployee.trim();0!==t.length&&(this.checkName(t)?(this.workers.push({name:t,money:0}),this.addEmployeeToBase(t),this.newEmployee=""):alert("Istnieje osoba o takim imieniu, dodaj pierwszą literę nazwiska lub inny identyfikujący Cię element"))},currentDate:function(){let t=new Date;const e=t=>t<10?"0"+t:t;return`${e(t.getDate())}/${e(t.getMonth()+1)}/${e(t.getFullYear())}, ${e(t.getHours())}:${e(t.getMinutes())}`},take10zlotys:function(t){this.savingTime=!0,t.money=Math.round(100*(t.money-10))/100,this.coins[9].amount-=1;const e=[this.addEmployeeMoney(t.name,t.money),this.addPayment(t.name,this.currentDate()),this.getMoneyFromPig(),this.refreshSum()];Promise.all(e).then((()=>{this.$root.$refs.TipsForm.subtract10zl(),this.savingTime=!1}))},sum:function(){const t=1*this.coins[0].amount+2*this.coins[1].amount+5*this.coins[2].amount+10*this.coins[3].amount+20*this.coins[4].amount+50*this.coins[5].amount+100*this.coins[6].amount+200*this.coins[7].amount+500*this.coins[8].amount+1e3*this.coins[9].amount;return t},emitTodayWorkers:function(t){t.hours=1,t.today=!t.today;const e=this.todayWorkers();this.$emit("input",e)},async addEmployeeToBase(t){try{await _.addEmployee(t)}catch(e){this.error=e}},async addEmployeeMoney(t,e){try{await _.addEmployeeMoney([t],[e])}catch(s){this.error=s}},async addPayment(t,e){try{await _.addPayment(t,e)}catch(s){this.error=s}},async getMoneyFromPig(){try{await _.saveCoins(["10 złotych"],[this.coins[9].amount])}catch(t){this.error=t}},async refreshSum(){try{await _.saveSum(this.sum())}catch(t){this.error=t}}}}),$=C,z=(0,w.A)($,E,x,!1,null,null,null),S=z.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"logbook"},[s("h2",[t._v("dziennik ")]),t._v(" "),s("div",{staticClass:"table"},[t._m(0),t._v(" "),t._l(t.summaries.slice().reverse(),(function(e){return s("div",{key:e.date,staticClass:"day"},[s("div",{staticClass:"date"},[t._v(t._s(e.date))]),t._v(" "),s("div",{staticClass:"stuff"},[t._v(t._s(e.participants))]),t._v(" "),s("div",{staticClass:"amount"},[t._v(t._s(e.sum))])])}))],2)])},P=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"nav"},[s("div",{staticClass:"date"},[t._v("Data")]),t._v(" "),s("div",{staticClass:"stuff"},[t._v("Czarkownicy")]),t._v(" "),s("div",{staticClass:"amount"},[t._v("Kwota")])])}],T={data(){return{error:"",text:"",summaries:[]}},async created(){try{this.summaries=await _.getSummaries()}catch(t){this.error=t}}},W=T,M=(0,w.A)(W,A,P,!1,null,"22728758",null),N=M.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"latest-payouts"},[s("h2",[t._v("ostatnie wypłaty")]),t._v(" "),s("div",{staticClass:"table"},[t._m(0),t._v(" "),t._l(t.payments.slice().reverse(),(function(e){return s("div",{key:e.date,staticClass:"day"},[s("div",{staticClass:"date"},[t._v(t._s(e.date))]),t._v(" "),s("div",{staticClass:"stuff"},[t._v(t._s(e.name))])])}))],2)])},F=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"nav"},[s("div",{staticClass:"date"},[t._v("Data")]),t._v(" "),s("div",{staticClass:"stuff"},[t._v("Dychobiorca")])])}],O={data(){return{error:"",text:"",payments:[]}},async created(){try{this.payments=await _.getPayments()}catch(t){this.error=t}}},D=O,B=(0,w.A)(D,j,F,!1,null,"5e4c4f8c",null),Z=B.exports,H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.successSave>=0?s("div",{staticClass:"loader"}):t._e(),t._v(" "),t.visible&&(t.newTips>0||t.todayWorkers.length)?s("div",{staticClass:"tips-form"},[t.coins.length?s("h3",[t._v(t._s(t.beautyAmount(t.sum()-t.startAmount)))]):t._e(),t._v(" "),s("ul",t._l(t.todayWorkers,(function(e){return s("li",{key:e.name},[s("span",[t._v(t._s(e.name))]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.hours,expression:"worker.hours"}],attrs:{name:"hours"},on:{change:function(s){var n=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"hours",s.target.multiple?n:n[0])}}},[s("option",{attrs:{value:"1"}},[t._v("cała zmiana")]),t._v(" "),s("option",{attrs:{value:"0.5"}},[t._v("pół zmiany")]),t._v(" "),s("option",{attrs:{value:"2"}},[t._v("podwójna zmiana")])])])})),0),t._v(" "),s("button",{staticClass:"save-changes",on:{click:t.newCalculation}},[t._v("\n      Zapisz zmiany\n    ")])]):t._e(),t._v(" "),t.successSave>=0?s("div",{staticClass:"saved-status"},[t.successSave<4?s("span",[t._v("\n      Trwa zapis...\n      "),s("br"),t._v("\n      "+t._s(t.successSave/4*100)+"%\n    ")]):s("span",[t._v("\n      Zapis danych zakończony sukcesem!\n      "),s("br"),t._v(" "),s("button",{on:{click:function(e){t.successSave=-1}}},[t._v("Zamknij")])])]):t._e()])},U=[],Y={data(){return{startAmount:0,visible:!0,successSave:-1,error:""}},props:["coins","todayWorkers","pigValue"],async created(){this.$root.$refs.TipsForm=this;try{const t=await _.getSum();this.startAmount=t[0].sum}catch(t){this.error=t}},methods:{subtract10zl:function(){this.startAmount-=1e3},beautyAmount:function(t){let e="";return t<0&&(e="-"),t=Math.abs(t),`${e}${Math.floor(t/100)},${t%100<10?"0"+t%100:t%100} zł`},sum:function(){const t=1*this.coins[0].amount+2*this.coins[1].amount+5*this.coins[2].amount+10*this.coins[3].amount+20*this.coins[4].amount+50*this.coins[5].amount+100*this.coins[6].amount+200*this.coins[7].amount+500*this.coins[8].amount+1e3*this.coins[9].amount;return t},currentDate:function(){let t=new Date;const e=t=>t<10?"0"+t:t;return`${e(t.getDate())}/${e(t.getMonth()+1)}/${e(t.getFullYear())}, ${e(t.getHours())}:${e(t.getMinutes())}`},newCalculation:function(){if(!this.todayWorkers.length)return alert("Zaznacz pracowników");this.visible=!1,this.successSave++;let t=this.todayWorkers.reduce(((t,e,s)=>1===s?parseFloat(t.hours)+parseFloat(e.hours):t+parseFloat(e.hours)));1===this.todayWorkers.length&&(t=this.todayWorkers[0].hours);const e=[],s=[];this.todayWorkers.forEach((n=>{n.money+=Math.floor(this.newTips/(t/parseFloat(n.hours)))/100,e.push(n.name),s.push(n.money)})),this.saveEmployeeToBase(e,s);let n=[];[...this.todayWorkers].forEach((t=>{n.push(t.name)})),this.saveSummaryToBase(this.currentDate(),n.join(", "),this.beautyAmount(this.newTips)),this.saveSum(this.sum());const a=[],o=[];[...this.coins].forEach((t=>{a.push(t.coin),o.push(t.amount)})),this.saveToBaseCoin(a,o)},async saveEmployeeToBase(t,e){try{await _.addEmployeeMoney(t,e),this.successSave++}catch(s){this.error=s}},async saveSummaryToBase(t,e,s){try{await _.addSummary(t,e,s),this.successSave++}catch(n){this.error=n}},async saveSum(t){try{await _.saveSum(t),this.successSave++}catch(e){this.error=e}},async saveToBaseCoin(t,e){try{await _.saveCoins(t,e),this.successSave++}catch(s){this.error=s}}},computed:{newTips:function(){return this.coins.length?this.sum()-this.startAmount:0}}},I=Y,K=(0,w.A)(I,H,U,!1,null,null,null),L=K.exports,V={name:"app",data(){return{todayWorkers:[],coins:[]}},components:{Money:b,Employees:S,Logbook:N,Payments:Z,TipsForm:L}},q=V,G=(0,w.A)(q,a,o,!1,null,null,null),J=G.exports;n.A.config.productionTip=!1,new n.A({render:t=>t(J)}).$mount("#app")},9569:function(t,e,s){t.exports=s.p+"img/4213d4154183bc179091bdbadd46.e2edadd6.jpg"}},e={};function s(n){var a=e[n];if(void 0!==a)return a.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,s),o.exports}s.m=t,function(){var t=[];s.O=function(e,n,a,o){if(!n){var i=1/0;for(m=0;m<t.length;m++){n=t[m][0],a=t[m][1],o=t[m][2];for(var r=!0,c=0;c<n.length;c++)(!1&o||i>=o)&&Object.keys(s.O).every((function(t){return s.O[t](n[c])}))?n.splice(c--,1):(r=!1,o<i&&(i=o));if(r){t.splice(m--,1);var u=a();void 0!==u&&(e=u)}}return e}o=o||0;for(var m=t.length;m>0&&t[m-1][2]>o;m--)t[m]=t[m-1];t[m]=[n,a,o]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.p="/"}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,n){var a,o,i=n[0],r=n[1],c=n[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(a in r)s.o(r,a)&&(s.m[a]=r[a]);if(c)var m=c(s)}for(e&&e(n);u<i.length;u++)o=i[u],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(m)},n=self["webpackChunkclient"]=self["webpackChunkclient"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=s.O(void 0,[504],(function(){return s(9043)}));n=s.O(n)})();
//# sourceMappingURL=app.a089c639.js.map